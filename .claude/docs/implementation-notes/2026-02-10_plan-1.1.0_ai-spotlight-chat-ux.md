# Plan v1.1.0 - AI Spotlight Chat + UX 개선

**날짜**: 2026-02-10
**범위**: AI Help 제거, Spotlight Chat 추가, 중복 감지, 검색 결과 라벨 개선

## 변경된 파일

### 백엔드 (Rust)
- `src-tauri/src/commands/ai.rs` - `ai_chat` 커맨드 추가 (semantic search + LLM 응답)
- `src-tauri/src/lib.rs` - `ai_chat` 커맨드 등록

### 프론트엔드 (React/TS)
- `src/components/ai/SpotlightChat.tsx` - **신규** Spotlight 스타일 AI 채팅 Dialog
- `src/components/ai/SpotlightChat.test.tsx` - **신규** 6 테스트
- `src/components/snippet/SnippetForm.tsx` - AI Help 제거, 중복 감지 배너 추가
- `src/components/snippet/SnippetDetail.tsx` - "Ask AI" 버튼으로 Ollama Insight 교체
- `src/components/search/SearchResults.tsx` - "관련도" 라벨 추가
- `src/components/search/SearchResults.test.tsx` - 테스트 업데이트
- `src/pages/HomePage.tsx` - SpotlightChat 통합, 상태 관리
- `src/hooks/useAI.ts` - `useAIChat` 뮤테이션 훅 추가
- `src/hooks/useKeyboardShortcuts.ts` - `⌘+J` Spotlight 단축키 추가
- `src/lib/tauri.ts` - `aiApi.chat()` 함수 추가

## 테스트 결과
- Rust: 55 passed
- Frontend: 83 passed (6 new SpotlightChat tests)
- Total: 138

## 구현 설명

### 왜 이렇게 구성했는가?
- **AI Help 제거**: RecallSnippet은 이미 해결한 문제를 기록하는 앱. 솔루션 자동 생성은 용도에 맞지 않음
- **Spotlight Chat**: macOS Spotlight 패턴을 따라 글로벌 `⌘J`로 어디서든 접근 가능
- **Context 모드**: 글로벌(전체 DB 검색) + 스니펫 컨텍스트(특정 스니펫 정보 포함) 두 모드
- **중복 감지**: debounce(500ms) + semantic search로 유사 스니펫 감지, 불필요한 중복 방지
- **ai_chat 백엔드**: semantic search → 상위 5개 스니펫 → 시스템 프롬프트 컨텍스트 → LLM 응답

### 장점
- 사용자가 자연어로 과거 해결 경험을 검색/회상 가능
- ⌘J로 어디서든 빠르게 접근
- 스니펫 상세 페이지에서 해당 스니펫 컨텍스트로 직접 AI 질문 가능
- 중복 스니펫 생성 방지로 지식 베이스 품질 유지

### 단점 / 트레이드오프
- 채팅 히스토리가 세션 동안만 유지됨 (대화가 길어지면 이전 컨텍스트 유실)
- Ollama가 실행 중이어야 모든 AI 기능 동작
- 중복 감지는 Ollama 의존적 (임베딩 필요)

### 아키텍처 결정
- Dialog 기반 UI (별도 페이지가 아닌 모달)로 기존 워크플로우 중단 없이 사용
- `ai_chat` 커맨드에서 search + LLM을 한 번에 처리 (프론트엔드 복잡도 감소)
- SpotlightChat은 독립 컴포넌트로, context prop만으로 글로벌/스니펫 모드 전환
