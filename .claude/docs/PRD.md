# RecallSnippet - Product Requirements Document

## 개요

### 프로젝트명

RecallSnippet - 개발자를 위한 로컬 AI 기반 코드 스니펫 & 문제 해결 지식 베이스

### 문제 정의

개발자는 문제를 해결하면서 수많은 코드 스니펫, 해결 방법, 명령어들을 접하지만:

- 나중에 비슷한 문제를 만났을 때 "전에 어떻게 해결했더라?"를 기억 못함
- 브라우저 북마크, 노트앱, 슬랙 등에 분산되어 찾기 어려움
- 기존 노트앱은 키워드 검색만 가능하고, "비슷한 문제"를 찾아주지 못함

### 솔루션

로컬에서 동작하는 AI 기반 개인 지식 베이스:

- 코드 스니펫과 해결 방법을 구조화된 템플릿으로 저장
- AI가 시맨틱 검색으로 "비슷한 문제" 찾아줌
- 모든 데이터는 로컬에 저장 (프라이버시)

### 타겟 사용자

- 1차: 본인 (개발하면서 직접 사용)
- 2차: 비슷한 pain point를 가진 개발자들

### 프로젝트 목적

- 포트폴리오 프로젝트로서 기술 역량 시연
- Tauri + Rust 학습
- 로컬 AI/RAG 파이프라인 구현 경험

---

## 기술 스택

### Core

| 영역          | 기술                             | 선택 이유                                   |
| ------------- | -------------------------------- | ------------------------------------------- |
| 앱 프레임워크 | Tauri v2                         | Electron 대비 경량, Rust 기반, 크로스플랫폼 |
| 백엔드        | Rust                             | 성능, 메모리 안전성, 학습 목적              |
| 프론트엔드    | React + TypeScript               | 익숙한 스택, 빠른 개발                      |
| 스타일링      | Tailwind CSS + shadcn/ui         | 빠른 UI 개발                                |
| 데이터베이스  | SQLite                           | 로컬 파일 기반, 심플                        |
| 벡터 저장소   | sqlite-vec 또는 LanceDB          | 시맨틱 검색용                               |
| LLM 런타임    | Ollama                           | 로컬 LLM 실행                               |
| 임베딩        | @xenova/transformers 또는 Ollama | 텍스트 → 벡터 변환                          |

### 개발 도구

- 테스트: Vitest (프론트), Rust 내장 테스트 (백엔드)
- 빌드: Vite
- 린터: ESLint, Clippy
- 패키지 매니저: pnpm (프론트), Cargo (Rust)

---

## 핵심 기능 (MVP)

### 1. 스니펫 저장 (CRUD)

#### 데이터 구조 (템플릿)

```
제목: [문제를 한 줄로]
문제 상황: [어떤 상황에서 발생했는가]
해결 방법: [어떻게 해결했는가]
코드 스니펫: [관련 코드]
태그: [기술 스택, 카테고리]
참고 링크: [선택사항]
```

#### 기능

- 새 스니펫 작성 (템플릿 기반)
- 스니펫 수정/삭제
- 마크다운 지원
- 코드 블록 신택스 하이라이팅

### 2. AI 자동 완성

#### 기능

- 문제 상황만 입력하면 AI가 해결 방법 초안 작성
- 코드 스니펫 설명 자동 생성
- 관련 태그 자동 추천

### 3. 시맨틱 검색

#### 기능

- 자연어로 검색 ("Docker 컨테이너 네트워크 관련 문제")
- 유사한 문제/해결법 찾기
- 검색 결과 관련도 순 정렬

#### 기술 구현

```
사용자 쿼리 → 임베딩 변환 → 벡터 유사도 검색 → 결과 반환
```

### 4. 태그 & 필터

#### 기능

- 태그 기반 분류 (예: Docker, Prisma, TypeScript)
- 태그별 필터링
- 태그 자동 완성

### 5. 설정

#### 기능

- Ollama 모델 선택
- 테마 (다크/라이트)
- 데이터 저장 경로 설정

---

## 사용자 플로우

### 새 스니펫 저장

```
1. "새 스니펫" 버튼 클릭
2. 템플릿 폼 표시
3. 문제 상황 입력
4. (선택) "AI 도움받기" → AI가 해결 방법 초안 생성
5. 내용 수정/보완
6. 태그 추가
7. 저장
```

### 검색

```
1. 검색창에 자연어 입력 ("Prisma에서 relation 어떻게 했더라")
2. AI가 시맨틱 검색 수행
3. 관련 스니펫 목록 표시 (관련도 순)
4. 스니펫 클릭 → 상세 보기
```

---

## 화면 구성 (MVP)

### 1. 메인 화면

```
+------------------------------------------+
|  [검색창]                    [+ 새 스니펫] |
+------------------------------------------+
|  태그 필터  |  스니펫 목록                 |
|  - Docker   |  +------------------------+ |
|  - Prisma   |  | 제목                   | |
|  - React    |  | 태그들...              | |
|             |  +------------------------+ |
|             |  +------------------------+ |
|             |  | 제목                   | |
|             |  | 태그들...              | |
|             |  +------------------------+ |
+------------------------------------------+
```

### 2. 스니펫 상세/편집 화면

```
+------------------------------------------+
|  [← 뒤로]              [수정] [삭제]      |
+------------------------------------------+
|  제목: ____________________              |
|                                          |
|  문제 상황:                              |
|  [마크다운 에디터]                        |
|                                          |
|  해결 방법:          [🤖 AI 도움받기]     |
|  [마크다운 에디터]                        |
|                                          |
|  코드 스니펫:                            |
|  [코드 에디터 with syntax highlighting]  |
|                                          |
|  태그: [tag1] [tag2] [+ 추가]            |
|                                          |
|  [저장]                                  |
+------------------------------------------+
```

### 3. 설정 화면

```
+------------------------------------------+
|  설정                                    |
+------------------------------------------+
|  LLM 모델: [드롭다운: llama3.2, mistral] |
|  테마: [라이트 / 다크]                    |
|  데이터 경로: [경로 선택]                 |
+------------------------------------------+
```

---

## 비기능 요구사항

### 성능

- 앱 시작 시간: < 3초
- 검색 응답 시간: < 2초 (1000개 스니펫 기준)
- 메모리 사용량: < 500MB (LLM 제외)

### 보안 & 프라이버시

- 모든 데이터 로컬 저장
- 네트워크 요청 없음 (Ollama도 로컬)
- 데이터 암호화 (v2 고려)

### 플랫폼

- macOS (Intel/Apple Silicon)
- Windows 10/11
- (선택) Linux

---

## 마일스톤

### Phase 1: 기반 구축 (1주)

- [ ] Tauri + React 프로젝트 셋업
- [ ] SQLite 데이터베이스 스키마 설계
- [ ] 기본 CRUD API (Rust)
- [ ] 기본 UI 레이아웃

### Phase 2: 핵심 기능 (2주)

- [ ] 스니펫 저장/조회/수정/삭제
- [ ] 마크다운 에디터 통합
- [ ] 코드 신택스 하이라이팅
- [ ] 태그 시스템

### Phase 3: AI 통합 (2주)

- [ ] Ollama 연동
- [ ] 벡터 임베딩 파이프라인
- [ ] 시맨틱 검색 구현
- [ ] AI 자동 완성 기능

### Phase 4: 마무리 + UI 리디자인 (1주)

- [ ] 설정 백엔드 (Settings DB + Commands)
- [ ] 설정 프론트엔드 (Settings 타입/훅)
- [ ] 테마 시스템 (다크/라이트, DESIGN.md 색상 팔레트)
- [ ] SettingsDialog 컴포넌트
- [ ] UI 리디자인 (Header + Sidebar + Content 레이아웃)
- [ ] SnippetCard 리디자인 (카드형 + 코드 프리뷰)
- [ ] 그리드 레이아웃 + SnippetDetail 2-column
- [ ] Empty/Loading/Error 상태 컴포넌트
- [ ] 키보드 단축키 (⌘K, ⌘N, Escape)
- [ ] 반응형 + HomePage 통합
- [ ] 테스트 업데이트
- [ ] 크로스 플랫폼 빌드 테스트
- [ ] README, 아키텍처 다이어그램

---

## 성공 지표

### 포트폴리오 관점

- [ ] GitHub README에 기술 스택, 아키텍처 다이어그램 포함
- [ ] 데모 영상/GIF
- [ ] 시스템 디자인 문서 (벡터 검색 파이프라인 등)
- [ ] TDD 적용 (테스트 커버리지 표시)

### 기능 관점

- [ ] 50개 이상 스니펫 저장 후 검색 잘 되는지
- [ ] AI 추천이 실제로 유용한지

---

## 리스크 & 대응

| 리스크         | 대응                                         |
| -------------- | -------------------------------------------- |
| Rust 러닝커브  | Claude Code 적극 활용, 핵심 로직 위주로 집중 |
| 로컬 LLM 성능  | 작은 모델(3B)부터 시작, 점진적 확장          |
| 벡터 검색 품질 | 청킹 전략, 임베딩 모델 실험                  |
| 개발 기간 초과 | MVP 범위 엄격히 제한, Phase별 진행           |

---

## 참고 자료

- [Tauri 공식 문서](https://tauri.app/)
- [Ollama](https://ollama.ai/)
- [sqlite-vec](https://github.com/asg017/sqlite-vec)
- [LanceDB](https://lancedb.com/)
